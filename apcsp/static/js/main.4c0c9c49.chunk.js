(this["webpackJsonpcapstone-apcsp"]=this["webpackJsonpcapstone-apcsp"]||[]).push([[0],{35:function(e,t,n){},36:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),s=n(29),c=n.n(s),i=(n(35),n(11)),o=n(4),u=(n(36),n(30)),l=n.n(u),p=n(0);function h(e){var t=e.code,n=e.setCode,r=e.onRun,a=e.error;return Object(p.jsxs)("div",{className:"Editor",children:[Object(p.jsx)("div",{className:"toolbar",children:Object(p.jsx)("button",{onClick:function(){return r()},children:"Run"})}),Object(p.jsxs)("div",{className:"codeErrorMessageContainer",children:[Object(p.jsx)(l.a,{className:"code",fontSize:18,value:t,onChange:function(e){return n(e)}}),a&&Object(p.jsxs)("div",{className:"errorMessage",children:[a.location.line,":",a.location.col," ",a.message]})]})]})}var b=n(1),d=n.n(b),x=n(10),v=n(3);n(46);function f(e){var t=e.asts;return Object(p.jsx)("div",{className:"CodeBlock",children:t.map((function(e,t){return Object(p.jsx)(j,{ast:e},t)}))})}function j(e){var t=e.ast,n=e.parens,r=void 0===n?"never":n;return t.error?Object(p.jsxs)("span",{className:"errorContainer",children:[Object(p.jsx)("div",{className:"errorText",children:t.error}),Object(p.jsx)("span",{className:"errorElement",children:Object(p.jsx)(m,{ast:t,parens:r})})]}):Object(p.jsx)(m,{ast:t,parens:r})}function m(e){var t=e.ast,n=e.parens,r=void 0===n?"never":n,s=function(e){return Object(p.jsx)(j,{ast:e})},c=function(e){return Object(p.jsx)(j,{ast:e,parens:"always"})},i=function(e){return Object(p.jsx)(j,{ast:e,parens:"ifoperator"})},o=function(e){return"always"===r?Object(p.jsxs)("span",{children:[Object(p.jsx)("span",{className:"alt",children:"("}),Object(p.jsx)("span",{className:"oval",children:e}),Object(p.jsx)("span",{className:"alt"})]}):e},u=function(e){return"ifoperator"===r||"always"===r?Object(p.jsxs)("span",{children:[Object(p.jsx)("span",{className:"alt",children:"("}),Object(p.jsx)("span",{className:"oval",children:e}),Object(p.jsx)("span",{className:"alt"})]}):e},l=function(e){return Object(p.jsxs)("div",{className:"indentedBlock",children:[Object(p.jsx)("span",{className:"alt",children:"{"}),e.map((function(e,t){return a.a.cloneElement(s(e),{key:t})})),Object(p.jsx)("span",{className:"alt",children:"}"})]})},h=function(e){var t,n=function(e){return"string"===typeof e?e:i(e)};return t=0===e.length?Object(p.jsx)(p.Fragment,{children:"\u2009"}):e.map((function(e,t){return Object(p.jsxs)(p.Fragment,{children:[t>0&&", ",n(e)]})})),Object(p.jsxs)("span",{className:"box",children:[Object(p.jsx)("span",{className:"alt",children:"["}),t,Object(p.jsx)("span",{className:"alt",children:"]"})]})},b=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?Object(p.jsxs)("div",{className:"running",children:[Object(p.jsx)("div",{className:"runningArrow",children:">"}),e]}):e};if("assign"===t.type)return b(Object(p.jsxs)("div",{className:"rounded",children:[s(t.lhs)," \u2190 ",s(t.rhs)]}),t.isRunning);if("breakpoint"===t.type)return b(Object(p.jsx)("div",{className:"rounded",children:"BREAKPOINT"}),t.isRunning);if("operator"===t.type){var d="!="===t.operator?"\u2260":">="===t.operator?"\u2265":"<="===t.operator?"\u2264":t.operator;return u(Object(p.jsxs)("span",{children:[i(t.lhs)," ",d," ",i(t.rhs)]}))}return"not"===t.type?u(Object(p.jsxs)("span",{children:["NOT ",i(t.value)]})):"negate"===t.type?u(Object(p.jsxs)("span",{children:["-",i(t.value)]})):"if"===t.type?Object(p.jsxs)("div",{className:"filled",children:[b(Object(p.jsxs)("div",{className:"condition",children:["IF ",c(t.condition)]}),t.isRunning),l(t.iftrue)]}):"ifelse"===t.type?Object(p.jsxs)("div",{className:"filled",children:[b(Object(p.jsxs)("div",{className:"condition",children:["IF ",c(t.condition)]}),t.isRunning),l(t.iftrue),Object(p.jsx)("div",{className:"condition",children:"ELSE"}),l(t.iffalse)]}):"repeattimes"===t.type?Object(p.jsxs)("div",{className:"filled",children:[b(Object(p.jsxs)("div",{className:"condition",children:["REPEAT ",i(t.times)," TIMES"]}),t.isRunning),l(t.block)]}):"repeatuntil"===t.type?Object(p.jsxs)("div",{className:"filled",children:[b(Object(p.jsxs)("div",{className:"condition",children:["REPEAT UNTIL ",c(t.condition)]}),t.isRunning),l(t.block)]}):"list"===t.type?h(t.items):"subscript"===t.type?o(Object(p.jsxs)("span",{children:[s(t.list),"\u2009",Object(p.jsx)("span",{className:"alt",children:"["}),Object(p.jsx)("span",{className:"box",children:s(t.index)}),Object(p.jsx)("span",{className:"alt",children:"]"})]})):"foreach"===t.type?Object(p.jsxs)("div",{className:"filled",children:[b(Object(p.jsxs)("div",{className:"condition",children:["FOR EACH ",i(t.itemvar)," IN ",i(t.list)]}),t.isRunning),l(t.block)]}):"procedure"===t.type?Object(p.jsxs)("div",{className:"filled",children:[Object(p.jsxs)("div",{className:"condition",children:["PROCEDURE ",t.name," ",h(t.paramaters)]}),l(t.block)]}):"return"===t.type?b(Object(p.jsxs)("div",{className:"rounded",children:["RETURN ",Object(p.jsx)("span",{className:"box",children:s(t.value)})]}),t.isRunning):"returnvoid"===t.type?b(Object(p.jsx)("div",{className:"rounded",children:"RETURN"}),t.isRunning):"call"===t.type?u(Object(p.jsxs)("span",{children:[s(t.procedure)," ",t.paramaters.length>0&&h(t.paramaters)]})):"exprstat"===t.type?b(Object(p.jsx)("div",{className:"rounded",children:s(t.expr)}),t.isRunning):"string"===t.type?o(Object(p.jsxs)("span",{children:['"',t.value,'"']})):"number"===t.type?o(Object(p.jsx)("span",{children:t.value.toString()})):"boolean"===t.type?o(Object(p.jsx)("span",{children:t.value?"true":"false"})):"variable"===t.type?o(Object(p.jsx)("span",{children:t.name})):Object(p.jsx)("span",{children:"??"})}var y=n(5),O=n(22),k=n(6),g=n(7),N=n(14),w=n(16),E=n(17),R=n(12),T=n.n(R),C=n(21),I=n.n(C),S=(Error,function(e){Object(N.a)(n,e);var t=Object(w.a)(n);function n(){var e;return Object(k.a)(this,n),e=t.call(this,"we have canceled"),Object.setPrototypeOf(Object(g.a)(e),n.prototype),e}return n}(Object(E.a)(Error))),A=function e(t){Object(k.a)(this,e),this.ast=void 0,this.ast=t},P=function(){function e(t){var n=this;Object(k.a)(this,e),this.globals=void 0,this.locals=void 0,this.callbacks=void 0,this.shouldCancelReal=!1,this.shouldStep=!1,this.annotatedAst=[],this.callbacks=t,this.globals=new Map,this.locals=null,this.globals.set("DISPLAY",{type:"procedure",builtin:!0,call:function(){var e=Object(v.a)(d.a.mark((function e(t,r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 1!==r.length&&n.error(t,"DISPLAY takes 1 argument"),e.next=3,n.callbacks.onDisplay(T()(r[0]));case 3:return e.abrupt("return",{type:"void"});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}),this.globals.set("INPUT",{type:"procedure",builtin:!0,call:function(){var e=Object(v.a)(d.a.mark((function e(t,r){var a,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 0!==r.length&&n.error(t,"INPUT takes no arguments"),e.next=3,n.callbacks.onWaitForInput();case 3:return a=e.sent,e.next=6,n.maybeCancel();case 6:if(s=Number(a),!isNaN(s)){e.next=11;break}return e.abrupt("return",{type:"string",value:a});case 11:return e.abrupt("return",{type:"number",value:s});case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}),this.globals.set("APPEND",{type:"procedure",builtin:!0,call:function(){var e=Object(v.a)(d.a.mark((function e(t,r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 2!==r.length&&n.error(t,"APPEND takes 2 arguments"),"list"!==r[0].type&&n.error(t.paramaters[0],"must be a list"),r[0].value.push(r[1]),e.abrupt("return",{type:"void"});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}),this.globals.set("LENGTH",{type:"procedure",builtin:!0,call:function(){var e=Object(v.a)(d.a.mark((function e(t,r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 1!==r.length&&n.error(t,"LENGTH takes 1 argument"),"list"!==r[0].type&&n.error(t.paramaters[0],"must be a list"),e.abrupt("return",{type:"number",value:r[0].value.length});case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}),this.globals.set("REMOVE",{type:"procedure",builtin:!0,call:function(){var e=Object(v.a)(d.a.mark((function e(t,r){var a,s,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 2!==r.length&&n.error(t,"REMOVE takes 2 arguments"),"list"!==r[0].type&&n.error(t.paramaters[0],"must be a list"),"number"===r[1].type&&Number.isInteger(r[1].value)||n.error(t.paramaters[1],"must be an integer"),a=r[0].value,(s=r[1].value)<=0&&n.error(t.paramaters[1],"must be >= 1"),s>a.length&&n.error(t,"index bigger than list length"),c=a.splice(s-1,1),e.abrupt("return",c[0]);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}),this.globals.set("INSERT",{type:"procedure",builtin:!0,call:function(){var e=Object(v.a)(d.a.mark((function e(t,r){var a,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 2!==r.length&&n.error(t,"INSERT takes 3 arguments"),"list"!==r[0].type&&n.error(t.paramaters[0],"must be a list"),"number"===r[1].type&&Number.isInteger(r[1].value)||n.error(t.paramaters[1],"must be an integer"),a=r[0].value,(s=r[1].value)<=0&&n.error(t.paramaters[1],"must be >= 1"),s>a.length+1&&n.error(t,"index bigger than list length"),a.splice(s-1,0,r[3]),e.abrupt("return",{type:"void"});case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}),this.globals.set("RANDOM",{type:"procedure",builtin:!0,call:function(){var e=Object(v.a)(d.a.mark((function e(t,r){var a,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 2!==r.length&&n.error(t,"RANDOM takes 2 arguments"),"number"===r[0].type&&Number.isInteger(r[0].value)||n.error(t.paramaters[0],"must be an integer"),"number"===r[1].type&&Number.isInteger(r[1].value)||n.error(t.paramaters[1],"must be an integer"),a=r[0].value,s=r[1].value,e.abrupt("return",{type:"number",value:Math.floor(Math.random()*(s-a+1)+a)});case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()})}return Object(O.a)(e,[{key:"shouldCancel",set:function(e){this.shouldCancelReal=e,console.log("Set shouldCancel"+e)}},{key:"assign",value:function(){var e=Object(v.a)(d.a.mark((function e(t,n){var r,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("variable"!==t.type){e.next=4;break}!this.locals||this.globals.has(t.name)?this.globals.set(t.name,n):this.locals.set(t.name,n),e.next=14;break;case 4:return e.next=6,this.expectType(t.index,"number");case 6:return r=e.sent.value,e.next=9,this.expectType(t.list,"list");case 9:a=e.sent.value,Number.isInteger(r)||this.error(t.index,"must be an integer"),r<=0&&this.error(t.index,"must be >= 1"),r>a.length&&this.error(t,"index bigger than list length"),a[r-1]=n;case 14:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"interpret",value:function(e){var t=this;return this.annotatedAst=T()(e),this.runBlock(this.annotatedAst).catch((function(e){if(!(e instanceof A))throw e;t.error(e.ast,"cannot return outside procedure")}))}},{key:"maybeCancel",value:function(){var e=Object(v.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldCancelReal){e.next=3;break}throw this.shouldCancelReal=!1,new S;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"broadcastInfo",value:function(){this.callbacks.onInfo(T()(this.annotatedAst),{globals:T()(this.globals),locals:T()(this.locals)})}},{key:"step",value:function(){var e=Object(v.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isRunning=!0,this.broadcastInfo(),"procedure"===t.type||!this.shouldStep){e.next=5;break}return e.next=5,this.callbacks.onStepPause();case 5:t.isRunning=!1;case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"error",value:function(e,t){throw e.error=t,console.error(t),this.broadcastInfo(),new Error(t)}},{key:"expectType",value:function(){var e=Object(v.a)(d.a.mark((function e(t,n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.evaluate(t);case 2:if((r=e.sent).type!==n){e.next=7;break}return e.abrupt("return",r);case 7:this.error(t,"must be a ".concat(n));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"runBlock",value:function(){var e=Object(v.a)(d.a.mark((function e(t){var n,r,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(y.a)(t),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=11;break}return a=r.value,e.next=7,this.step(a);case 7:return e.next=9,this.run(a);case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),n.e(e.t0);case 16:return e.prev=16,n.f(),e.finish(16);case 19:this.broadcastInfo();case 20:case"end":return e.stop()}}),e,this,[[1,13,16,19]])})));return function(t){return e.apply(this,arguments)}}()},{key:"run",value:function(){var e=Object(v.a)(d.a.mark((function e(t){var n,r,a,s,c,i,o,u,l,p;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.maybeCancel();case 2:if("assign"!==t.type){e.next=10;break}return e.next=5,this.evaluate(t.rhs);case 5:return n=e.sent,e.next=8,this.assign(t.lhs,n);case 8:e.next=114;break;case 10:if("if"!==t.type){e.next=20;break}return e.next=13,this.expectType(t.condition,"boolean");case 13:if(r=e.sent.value,t.condition.evaluated={type:"boolean",value:r},!r){e.next=18;break}return e.next=18,this.runBlock(t.iftrue);case 18:e.next=114;break;case 20:if("ifelse"!==t.type){e.next=34;break}return e.next=23,this.expectType(t.condition,"boolean");case 23:if(a=e.sent.value,t.condition.evaluated={type:"boolean",value:a},!a){e.next=30;break}return e.next=28,this.runBlock(t.iftrue);case 28:e.next=32;break;case 30:return e.next=32,this.runBlock(t.iffalse);case 32:e.next=114;break;case 34:if("exprstat"!==t.type){e.next=39;break}return e.next=37,this.evaluate(t.expr);case 37:e.next=114;break;case 39:if("foreach"!==t.type){e.next=64;break}return e.next=42,this.expectType(t.list,"list");case 42:s=e.sent.value,c=Object(y.a)(s),e.prev=44,c.s();case 46:if((i=c.n()).done){e.next=54;break}return o=i.value,e.next=50,this.assign(t.itemvar,o);case 50:return e.next=52,this.runBlock(t.block);case 52:e.next=46;break;case 54:e.next=59;break;case 56:e.prev=56,e.t0=e.catch(44),c.e(e.t0);case 59:return e.prev=59,c.f(),e.finish(59);case 62:e.next=114;break;case 64:if("procedure"!==t.type){e.next=69;break}return e.next=67,this.assign({type:"variable",name:t.name},{type:"procedure",builtin:!1,ast:t});case 67:e.next=114;break;case 69:if("repeattimes"!==t.type){e.next=84;break}return e.next=72,this.expectType(t.times,"number");case 72:u=e.sent.value,Number.isInteger(u)||this.error(t.times,"must be an integer"),u<0&&this.error(t.times,"must be positive"),l=0;case 76:if(!(l<u)){e.next=82;break}return e.next=79,this.runBlock(t.block);case 79:l++,e.next=76;break;case 82:e.next=114;break;case 84:if("repeatuntil"!==t.type){e.next=102;break}p=!0;case 86:if(p){e.next=90;break}return e.next=90,this.step(t);case 90:return p=!1,e.next=93,this.expectType(t.condition,"boolean");case 93:if(!e.sent.value){e.next=96;break}return e.abrupt("break",100);case 96:return e.next=98,this.runBlock(t.block);case 98:e.next=86;break;case 100:e.next=114;break;case 102:if("breakpoint"!==t.type){e.next=108;break}return this.shouldStep=!0,e.next=106,this.step(t);case 106:e.next=114;break;case 108:if("return"!==t.type){e.next=112;break}throw new A(t);case 112:if("returnvoid"!==t.type){e.next=114;break}throw new A(t);case 114:case"end":return e.stop()}}),e,this,[[44,56,59,62]])})));return function(t){return e.apply(this,arguments)}}()},{key:"evaluate",value:function(){var e=Object(v.a)(d.a.mark((function e(t){var n,r,a,s,c,i,o,u,l,p,h,b,x,v,f,j,m,O,k,g,N,w,E,R,T,C,S,P,F,D,M,B;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.maybeCancel();case 2:if("operator"!==t.type){e.next=48;break}if("!="!==t.operator&&"="!==t.operator){e.next=15;break}return e.next=6,this.evaluate(t.lhs);case 6:return n=e.sent,e.next=9,this.evaluate(t.rhs);case 9:return r=e.sent,a=I()(n,r),s="!="===t.operator?!a:a,e.abrupt("return",{type:"boolean",value:s});case 15:if("*"!==t.operator&&"+"!==t.operator&&"-"!==t.operator&&"/"!==t.operator&&"MOD"!==t.operator){e.next=26;break}return e.next=18,this.expectType(t.lhs,"number");case 18:return c=e.sent.value,e.next=21,this.expectType(t.rhs,"number");case 21:return i=e.sent.value,o="*"===t.operator?c*i:"+"===t.operator?c+i:"-"===t.operator?c-i:"/"===t.operator?c/i:c%i,e.abrupt("return",{type:"number",value:o});case 26:if("<"!==t.operator&&"<="!==t.operator&&">"!==t.operator&&">="!==t.operator){e.next=37;break}return e.next=29,this.expectType(t.lhs,"number");case 29:return u=e.sent.value,e.next=32,this.expectType(t.rhs,"number");case 32:return l=e.sent.value,p=">"===t.operator?u>l:">="===t.operator?u>=l:"<"===t.operator?u<l:u<=l,e.abrupt("return",{type:"boolean",value:p});case 37:if("AND"!==t.operator&&"OR"!==t.operator){e.next=46;break}return e.next=40,this.expectType(t.lhs,"boolean");case 40:return h=e.sent.value,e.next=43,this.expectType(t.rhs,"boolean");case 43:return b=e.sent.value,x="AND"===t.operator?h&&b:h||b,e.abrupt("return",{type:"boolean",value:x});case 46:e.next=176;break;case 48:if("not"!==t.type){e.next=55;break}return e.next=51,this.expectType(t.value,"boolean");case 51:return v=e.sent.value,e.abrupt("return",{type:"boolean",value:!v});case 55:if("boolean"!==t.type){e.next=59;break}return e.abrupt("return",{type:"boolean",value:t.value});case 59:if("number"!==t.type){e.next=63;break}return e.abrupt("return",{type:"number",value:t.value});case 63:if("string"!==t.type){e.next=67;break}return e.abrupt("return",{type:"string",value:t.value});case 67:if("subscript"!==t.type){e.next=80;break}return e.next=70,this.expectType(t.index,"number");case 70:return f=e.sent.value,e.next=73,this.expectType(t.list,"list");case 73:return j=e.sent.value,Number.isInteger(f)||this.error(t.index,"must be an integer"),f<=0&&this.error(t.index,"must be >= 1"),f>j.length&&this.error(t.list,"index bigger than list length"),e.abrupt("return",j[f-1]);case 80:if("list"!==t.type){e.next=105;break}m=[],O=Object(y.a)(t.items),e.prev=83,O.s();case 85:if((k=O.n()).done){e.next=94;break}return g=k.value,e.t0=m,e.next=90,this.evaluate(g);case 90:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 92:e.next=85;break;case 94:e.next=99;break;case 96:e.prev=96,e.t2=e.catch(83),O.e(e.t2);case 99:return e.prev=99,O.f(),e.finish(99);case 102:return e.abrupt("return",{type:"list",value:m});case 105:if("negate"!==t.type){e.next=112;break}return e.next=108,this.expectType(t.value,"number");case 108:return N=e.sent,e.abrupt("return",{type:"number",value:-N.value});case 112:if("variable"!==t.type){e.next=118;break}return void 0===(R=null!==(w=null===(E=this.locals)||void 0===E?void 0:E.get(t.name))&&void 0!==w?w:this.globals.get(t.name))&&this.error(t,"unknown name"),e.abrupt("return",R);case 118:if("call"!==t.type){e.next=176;break}return e.next=121,this.expectType(t.procedure,"procedure");case 121:T=e.sent,C=[],S=Object(y.a)(t.paramaters),e.prev=124,S.s();case 126:if((P=S.n()).done){e.next=135;break}return F=P.value,e.t3=C,e.next=131,this.evaluate(F);case 131:e.t4=e.sent,e.t3.push.call(e.t3,e.t4);case 133:e.next=126;break;case 135:e.next=140;break;case 137:e.prev=137,e.t5=e.catch(124),S.e(e.t5);case 140:return e.prev=140,S.f(),e.finish(140);case 143:if(!T.builtin){e.next=149;break}return e.next=146,T.call(t,C);case 146:return e.abrupt("return",e.sent);case 149:for(D=T.ast.paramaters.length,M=this.locals,this.locals=new Map,C.length!==D&&this.error(t,"should have ".concat(D," paramaters")),B=0;B<D;B++)this.locals.set(T.ast.paramaters[B],C[B]);return e.prev=154,e.next=157,this.runBlock(T.ast.block);case 157:e.next=172;break;case 159:if(e.prev=159,e.t6=e.catch(154),!(e.t6 instanceof A)){e.next=171;break}if("returnvoid"!==e.t6.ast.type){e.next=166;break}return e.abrupt("return",{type:"void"});case 166:return e.next=168,this.evaluate(e.t6.ast.value);case 168:return e.abrupt("return",e.sent);case 169:e.next=172;break;case 171:throw e.t6;case 172:return e.prev=172,this.locals=M,e.finish(172);case 175:return e.abrupt("return",{type:"void"});case 176:this.error(t,"can't handle ".concat(t.type));case 177:case"end":return e.stop()}}),e,this,[[83,96,99,102],[124,137,140,143],[154,159,172,175]])})));return function(t){return e.apply(this,arguments)}}()}]),e}();n(47);function F(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("void"===e.type)return"[void]";if("procedure"===e.type)return"[procedure]";if("list"===e.type){var n,r="[",a="",s=Object(y.a)(e.value);try{for(s.s();!(n=s.n()).done;){var c=n.value;r+=a,r+=F(c),a=", "}}catch(i){s.e(i)}finally{s.f()}return r+="]"}return"string"===e.type?t?e.value:JSON.stringify(e.value):e.value.toString()}function D(e){var t=e.value,n=e.hideQuotes,r=void 0===n||n;return Object(p.jsx)("span",{children:F(t,r)})}function M(e){var t=e.variables;return Object(p.jsxs)("div",{className:"Variables",children:[Object(p.jsx)("h2",{children:"Variables"}),Object(p.jsx)("h3",{children:"Globals"}),Array.from(t.globals.entries(),(function(e){var t=Object(o.a)(e,2),n=t[0],r=t[1];return!("procedure"===r.type&&r.builtin)&&Object(p.jsxs)("div",{className:"variable",children:[Object(p.jsxs)("span",{className:"variableName",children:[n,": "]},n+"_key"),Object(p.jsx)("span",{className:"variableValue",children:Object(p.jsx)(D,{value:r})},n+"_value")]})})),t.locals&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h3",{children:"Locals"}),Array.from(t.locals.entries(),(function(e){var t=Object(o.a)(e,2),n=t[0],r=t[1];return!("procedure"===r.type&&r.builtin)&&Object(p.jsxs)("div",{className:"variable",children:[Object(p.jsxs)("span",{className:"variableName",children:[n,": "]},n+"_key"),Object(p.jsx)("span",{className:"variableValue",children:Object(p.jsx)(D,{value:r})},n+"_value")]})}))]})]})}n(48);function B(e){var t=e.displayed,n=e.onInput,a=Object(r.useState)(""),s=Object(o.a)(a,2),c=s[0],i=s[1];return Object(p.jsxs)("div",{className:"Console",children:[Object(p.jsx)("h2",{children:"Console"}),Object(p.jsx)("ul",{className:"displayed",children:t.map((function(e,t){return Object(p.jsxs)("li",{children:["display"===e.type&&Object(p.jsx)(D,{hideQuotes:!0,value:e.value}),"input"===e.type&&Object(p.jsx)("span",{style:{color:"blue"},children:e.value})]},t)}))}),n&&Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n(c),i("")},className:"inputcontainer",children:[Object(p.jsx)("input",{autoFocus:!0,value:c,onChange:function(e){return i(e.target.value)},type:"text",className:"inputbox"}),Object(p.jsx)("input",{type:"submit",value:"Submit"})]})]})}function L(e){e.code;var t=e.asts,n=e.onClose,a=Object(r.useState)([]),s=Object(o.a)(a,2),c=s[0],i=s[1],u=Object(r.useState)(null),l=Object(o.a)(u,2),h=l[0],b=l[1],j=Object(r.useState)(t),m=Object(o.a)(j,2),y=m[0],O=m[1],k=Object(r.useState)(null),g=Object(o.a)(k,2),N=g[0],w=g[1],E=Object(r.useState)({globals:new Map,locals:null}),R=Object(o.a)(E,2),T=R[0],C=R[1],I=Object(r.useState)(null),S=Object(o.a)(I,2),A=S[0],F=S[1],D=function(e){A&&(A(""),F(null)),e&&(e.shouldCancel=!0),w(null),b(null),O(t)},L=function(e){i([]);var n=new P({onDisplay:function(e){return Object(v.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i((function(t){return[].concat(Object(x.a)(t),[{type:"display",value:e}])}));case 1:case"end":return t.stop()}}),t)})))()},onWaitForInput:function(){return new Promise((function(e){F((function(t){return function(t){i((function(e){return[].concat(Object(x.a)(e),[{type:"input",value:t}])})),F(null),e(t)}}))}))},onInfo:function(e,t){O(e),C(t)},onStepPause:function(){return new Promise((function(e){w((function(t){return e}))}))}});b(n),n.shouldStep=e,n.interpret(t).then((function(){D(null)})).catch((function(e){w(null)}))};return Object(p.jsxs)("div",{className:"Running",children:[Object(p.jsxs)("div",{className:"toolbar",children:[Object(p.jsx)("button",{onClick:function(e){D(h),n()},children:"Close"}),!h&&Object(p.jsx)("button",{onClick:function(e){return L(!1)},children:"Run"}),!h&&Object(p.jsx)("button",{onClick:function(e){return L(!0)},children:"Step through"}),h&&Object(p.jsx)("button",{onClick:function(e){D(h)},children:"Stop"}),N&&!A&&h&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("button",{onClick:function(e){h.shouldStep=!1,N()},children:"Continue"}),Object(p.jsx)("button",{onClick:function(e){return N()},children:"Step"})]})]}),Object(p.jsx)(f,{asts:y}),Object(p.jsx)(M,{variables:T}),Object(p.jsx)(B,{displayed:c,onInput:A})]})}var U=["+","-","*","/","MOD","=","!=",">","<",">=","<=","AND","OR"];function H(e){return"string"===e.type||"number"===e.type||"boolean"===e.type}function V(e){return"variable"===e.type||"subscript"===e.type&&V(e.list)}var _=["AND","EACH","ELSE","FOR","IF","IN","MOD","NOT","OR","PROCEDURE","REPEAT","RETURN","TIMES","UNTIL","BREAKPOINT"],J=["{","}","[","]","(",")","<-",","];function z(e){for(var t=e,n=[],r={line:1,col:1};!t.match(/^\s*$/);){var a=G(t),s=a.text,c=a.token,o=a.whitespace;t=t.slice(s.length+o.length);var u,l=Object(y.a)(o);try{for(l.s();!(u=l.n()).done;){"\n"===u.value?(r.col=1,r.line++):r.col++}}catch(b){l.e(b)}finally{l.f()}var p,h=Object(y.a)(s);try{for(h.s();!(p=h.n()).done;){"\n"===p.value?(r.col=1,r.line++):r.col++}}catch(b){h.e(b)}finally{h.f()}n.push(Object(i.a)(Object(i.a)({},c),{},{location:r}))}return n}function G(e){var t,n,r=e,a=/^[\s\n]+/.exec(e),s=a?a[0]:"";r=r.slice(s.length);var c=/^[0-9]*\.?[0-9]+/.exec(r);if(c&&(t=c[0],n={type:"number",value:Number.parseFloat(c[0])}),!t){var i,o=[].concat(Object(x.a)(U),Object(x.a)(J)).sort((function(e,t){return t.length-e.length})),u=Object(y.a)(o);try{for(u.s();!(i=u.n()).done;){var l=i.value;if(r.startsWith(l)){t=l,n={type:l};break}}}catch(d){u.e(d)}finally{u.f()}}if(!t){var p=/^"(([^"\\]|(\\.))*)"/.exec(r);if(p)t=p[0],n={type:"string",value:JSON.parse(p[0])}}if(!t){var h=/^[a-zA-Z_][a-zA-Z_0-9]*/.exec(r);if(h){t=h[0];var b=_.find((function(e){return e===t}));n=b?{type:b}:"true"===t||"false"===t?{type:"boolean",value:"true"===t}:{type:"variable",name:t}}}if(!t||!n)throw new K({line:1,col:1},"Unknown token starting with '".concat(r.charAt(0),"'"));return{text:t,token:n,whitespace:s}}var K=function(e){Object(N.a)(n,e);var t=Object(w.a)(n);function n(e,r){var a;return Object(k.a)(this,n),(a=t.call(this,r)).location=void 0,Object.setPrototypeOf(Object(g.a)(a),n.prototype),a.location=e,a}return n}(Object(E.a)(Error));var W=function(){function e(t){Object(k.a)(this,e),this.tokens=void 0,this.current=void 0,this.precedences=new Map([["+",60],["-",60],["*",70],["/",70],["MOD",70],["=",40],["!=",40],[">",50],["<",50],[">=",50],["<=",50],["AND",30],["OR",20],["<-",10],["(",80],["[",80]]),this.tokens=t,this.current=0}return Object(O.a)(e,[{key:"next",get:function(){return this.current<this.tokens.length?this.tokens[this.current]:null}},{key:"location",get:function(){var e,t;return null!==(e=null===(t=this.next)||void 0===t?void 0:t.location)&&void 0!==e?e:this.tokens[this.tokens.length-1].location}},{key:"nextPrecedence",get:function(){return this.next&&this.precedences.get(this.next.type)||0}},{key:"accept",value:function(e){var t;return(null===(t=this.next)||void 0===t?void 0:t.type)===e?this.consume():null}},{key:"expect",value:function(e,t){if(null===this.next||this.next.type!==e)throw new K({line:1,col:1},t);return this.consume()}},{key:"consume",value:function(){var e=this.next;return this.current++,e}},{key:"program",value:function(){for(var e=[];this.next;)e.push(this.statement());return e}},{key:"block",value:function(){this.expect("{","Expected a block in curly braces");for(var e=[];"}"!==(null===(t=this.next)||void 0===t?void 0:t.type);){var t;e.push(this.statement())}return this.expect("}","Expected a curly braces to close the block"),e}},{key:"statement",value:function(){if(this.accept("IF")){this.expect("(","Expected parentheses around condition");var e=this.expression(0);this.expect(")","Expected a closing parenthesis");var t=this.block();return this.accept("ELSE")?{type:"ifelse",condition:e,iftrue:t,iffalse:this.block()}:{type:"if",condition:e,iftrue:t}}if(this.accept("BREAKPOINT"))return{type:"breakpoint"};if(this.accept("RETURN"))return this.next&&"}"!==this.next.type?{type:"return",value:this.expression(0)}:{type:"returnvoid"};if(this.accept("PROCEDURE")){var n=this.expect("variable","Expected a procedure name").name;this.expect("(","Expected a '(' for the paramater list");var r=[];if(!this.accept(")")){do{var a=this.expect("variable","Expected a paramter name");r.push(a.name)}while(this.accept(","));this.expect(")","Expected ')' to end paramater list")}return{type:"procedure",name:n,paramaters:r,block:this.block()}}if(this.accept("REPEAT")){if(this.accept("UNTIL")){this.expect("(","Expected parentheses around condition");var s=this.expression(0);return this.expect(")","Expected a closing parenthesis"),{type:"repeatuntil",condition:s,block:this.block()}}var c=this.expression(0);return this.expect("TIMES","Repeat must be REPEAT n TIMES or REPEAT UNTIL(condition)"),{type:"repeattimes",times:c,block:this.block()}}if(this.accept("FOR")){this.expect("EACH","FOR needs to have FOR EACH");var i=this.expect("variable","FOR EACH needs a variable");this.expect("IN","FOR EACH needs an IN");var o=this.expression(0),u=this.block();if(!V(i))throw new K(this.location,"must be a variable name");return{type:"foreach",itemvar:i,list:o,block:u}}var l=this.expression(0,!0);return"assign"===l.type?l:{type:"exprstat",expr:l}}},{key:"primary",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.accept("NOT"))return{type:"not",value:this.expression(0)};if(this.accept("-"))return{type:"negate",value:this.expression(0)};if(this.next&&H(this.next)){var n=this.next;return this.consume(),n}if(this.accept("(")){var r=this.expression(0);return this.expect(")","Closing paren"),r}if(this.accept("[")){var a=[];if(!this.accept("]")){do{a.push(this.expression(0))}while(this.accept(","));this.expect("]","Expected close bracket to end list")}return{type:"list",items:a}}if("variable"===(null===(e=this.next)||void 0===e?void 0:e.type)){var s={type:"variable",name:this.next.name};return this.consume(),s}throw this.accept(")")?new K(this.location,"This ')' has no matching '(' to close"):this.accept("]")?new K(this.location,"This ']' has no matching '[' to close"):new K(this.location,"Expected an expression".concat(t?" or statement":""))}},{key:"expression",value:function(e){for(var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.primary(n),a=function(){var e=t.consume();if(!e)return"break";var a=U.find((function(t){return t===e.type}));if(a){var s=t.expression(t.precedences.get(a)||0,!1);r={type:"operator",operator:a,lhs:r,rhs:s}}else if("("===e.type){var c=[];if(!t.accept(")")){do{c.push(t.expression(0))}while(t.accept(","));t.expect(")","Expected ')' to end paramater list")}r={type:"call",procedure:r,paramaters:c}}else if("["===e.type){var i=t.expression(0);t.expect("]","Expected a ']' to close the list"),r={type:"subscript",list:r,index:i}}else if("<-"===e.type){if(n){if(!V(r))throw new K(t.location,"Can only assign to a variable or list item");return{v:{type:"assign",lhs:r,rhs:t.expression(0)}}}throw new K(t.location,"Assignment must be a statement")}};e<this.nextPrecedence;){var s=a();if("break"===s)break;if("object"===typeof s)return s.v}return r}}]),e}();n(49);var Q=function(){var e,t=Object(r.useState)({mode:"editing",code:""}),n=Object(o.a)(t,2),a=n[0],s=n[1],c=Object(r.useState)(null),u=Object(o.a)(c,2),l=u[0],b=u[1];return"editing"===a.mode?e=Object(p.jsx)(h,{code:a.code,setCode:function(e){return s(Object(i.a)(Object(i.a)({},a),{},{code:e}))},onRun:function(){try{s({mode:"running",code:a.code,asts:(e=a.code,new W(z(e)).program())}),b(null)}catch(t){if(!(t instanceof K))throw t;b(t)}var e},error:l}):"running"===a.mode&&(e=Object(p.jsx)(L,{code:a.code,asts:a.asts,onClose:function(){return s({mode:"editing",code:a.code})}})),Object(p.jsxs)("div",{className:"App",children:[e,Object(p.jsxs)("footer",{children:[Object(p.jsxs)("div",{children:["Based on the AP\xae Computer Science Principles exam's ",Object(p.jsx)("a",{href:"https://apcentral.collegeboard.org/pdf/ap-computer-science-principles-exam-reference-sheet.pdf",children:"reference sheet."})]}),Object(p.jsx)("div",{children:"AP\xae is a trademark registered by the College Board, which is not affiliated with, and does not endorse, this site."})]})]})},Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,51)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}),(function(){}))};c.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(Q,{})}),document.getElementById("root")),Y()}},[[50,1,2]]]);
//# sourceMappingURL=main.4c0c9c49.chunk.js.map